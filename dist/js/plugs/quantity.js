/*!
 * uwkui
 * Author: lmy
 * Version: 1.0.0
 * Last Update: 2017-01-19 06:03:18
 */
!function(a){"use strict";var b=function(b,c){return this.opt=a.extend({},c),this.$ele=a(b),this.init().bindEvents(),this};b.prototype={init:function(){return this.$wrap=this.opt.$wrap||this.$ele.parent(),this.$minus=this.$wrap.find(".btn_minus"),this.$add=this.$wrap.find(".btn_add"),a.fn.keyboard?this.$ele.keyboard({type:"number"}):window.jQuery||this.$ele.attr("type","tel"),this},bindEvents:function(){var a=this,b=this.$ele,c=this.$wrap;c.on("click",".uicon-minus",function(a){b.val(parseInt(b.val())-1,10).trigger("change"),a.stopPropagation()}),c.on("click",".uicon-add",function(a){b.val(parseInt(b.val())+1,10).trigger("change"),a.stopPropagation()}),b.on("change",function(){a.reset()})},reset:function(b){var c=this.$ele,d=this.$minus,e=this.$add,f=parseInt(c.val(),10),g=parseInt(c.attr("max"),10),h=parseInt(c.attr("min"),10);return isNaN(h)&&(h=1),h>g&&(h=g,c.attr("min",g)),isNaN(g)||(!b&&g>0&&f>g&&a.toast("数量不能大于"+g),f>=g?(f=g,c.val(g),e.addClass("disabled")):e.removeClass("disabled")),isNaN(h)||(!b&&h>1&&h>f&&a.toast("数量不能小于"+h),h>=f?(c.val(h),d.addClass("disabled")):d.removeClass("disabled")),this}},a.fn.quantity=function(c,d){return this.each(function(){var c=a(this),e=c.data("quantity"),f=a.fn.quantity.qData[e],g="object"==typeof option&&option;f||(e=a.fn.quantity.qData.index++,f=a.fn.quantity.qData[e]=new b(this,g),c.data("quantity",e)),"string"==typeof option&&f[option](d)})},a.fn.quantity.qData={index:0},a.fn.quantity.Constructor=b,a('input[type="quantity"]').quantity()}($);