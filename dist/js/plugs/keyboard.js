/*!
 * uwkui
 * Author: lmy
 * Version: 1.0.0
 * Last Update: 2017-01-19 06:03:18
 */
!function(a){"use strict";var b={initKeyboard:function(b){var c="hasEnter"==b.keyboardType?'<div class="mkeyboard hasEnter slideUpAnime"><div class="grids-cont"><div class="big-block"><div class="grid-item btn-num">1</div><div class="grid-item btn-num">2</div><div class="grid-item btn-num">3</div><div class="grid-item btn-num">4</div><div class="grid-item btn-num">5</div><div class="grid-item btn-num">6</div></div><div class="small-block btn-delet"></div><div class="big-block"><div class="grid-item btn-num">7</div><div class="grid-item btn-num">8</div><div class="grid-item btn-num">9</div><div class="grid-item btn-num btn-dot">.</div><div class="grid-item btn-num cross">0</div></div><div class="small-block btn-hold btn-submit '+(b.submitStyle?b.submitStyle:"btn-success")+'">'+(b.submitText||"确定")+"</div></div></div>":'<div class="mkeyboard slideUpAnime"><div class="grids-cont"><div class="grid-item btn-num">1</div><div class="grid-item btn-num">2</div><div class="grid-item btn-num">3</div><div class="grid-item btn-num">4</div><div class="grid-item btn-num">5</div><div class="grid-item btn-num">6</div><div class="grid-item btn-num">7</div><div class="grid-item btn-num">8</div><div class="grid-item btn-num">9</div><div class="grid-item btn-num btn-dot">.</div><div class="grid-item btn-num">0</div><div class="grid-item btn-delet"></div></div></div>',d=this,e=a(c).appendTo(a(document.body));this.placeholder=a('<div style="height:13.3rem"></div>').appendTo(a(".content-main")),this.cont=e,this.dot=e.find(".btn-dot"),this.subBtn=e.find(".btn-submit"),this.cont.on("click",".btn-num",function(b){b.stopPropagation();var c=d.renderVal(a(this).text());c!==!1&&d.setVal(c)});var f;this.cont.on({click:function(a){a.stopPropagation(),d.deletVal()},touchstart:function(a){f=setTimeout(d.deletVal.bind(d,!0),500)},touchend:function(){clearTimeout(f)}},".btn-delet"),b.submit&&this.cont.on("click",".btn-submit",function(a){a.stopPropagation(),d.submitVal()})}},c=function(b,c){return this.opt=a.extend({},c),this.$ele=a(b),this.init(),this};c.prototype={init:function(){var c=this;this.$ele.addClass("kbele").attr("readonly",!0),this.$point=this.$point||a('<div class="point"></div>').insertAfter(this.$ele),b.cont||b.initKeyboard(this.opt),this.$ele.on("click",function(a){c.open(a)})},open:function(c){c&&c.stopPropagation(),a(".kbele.focus").removeClass("focus").trigger("change"),b.tag=this.$ele.addClass("focus"),b.point=this.$point.text(this.$ele.val()),b.dot.text("money"===this.opt.type?".":""),this.bindEvent(),b.cont.open(),b.placeholder.show(),this.opt.notClose?a(document).off("click",this.close):a(document).on("click",this.close)},close:function(){b.cont.close(),b.placeholder.hide(),b.tag.removeClass("focus").trigger("change"),a(document).off("click",this.close)},bindEvent:function(){var c=this,d=this.opt.type;b.setVal=function(a){b.tag.val(a).trigger("input"),b.point.text(a),b.subBtn.toggleClass("btn-hold",!(a-0))},b.renderVal=function(a){var c=b.tag.val(),e=c+a;if("money"===d){if("."===e&&(e="0."),"."!==a&&"0"===c&&(e=e.substr(1)),!/^([1-9][\d]{0,9}|0)(\.|\.[\d]{1,2})?$/.test(e))return!1}else if("bankcard"===d){if(e=e.replace(/[^0-9]/g,"").replace(/(\d{4})(?!$)/g,"$1 "),!/^[\s|\d]{0,23}$/.test(e))return!1}else if("number"===d)return parseInt(e,10);return e},b.deletVal=function(a){a&&b.setVal("");var c=b.tag.val();if(c){var d=c.substring(0,c.length-1);b.setVal(d)}},b.submitVal=function(){c.opt.submit&&"[object Function]"===Object.prototype.toString.call(c.opt.submit)&&c.opt.submit(b.tag.val())!==!1&&c.$ele.keyboard("close")},"money"!==d&&"bankcard"!==d&&"number"!==d&&a.extend(b,this.opt)}},a.fn.keyboard=function(b){return this.each(function(){var d=a(this),e=d.data("keyboard"),f=a.fn.keyboard.plugData[e],g=d.data("type"),h=d.hasClass("notClose"),i="object"==typeof b&&b;i=i||{},i.type=i.type||g&&g||"money",i.notClose=i.notClose||h,f||(e=a.fn.keyboard.plugData.index++,f=a.fn.keyboard.plugData[e]=new c(this,i),d.data("keyboard",e)),"string"==typeof b&&f[b]()})},a.fn.keyboard.plugData={index:0},a.fn.keyboard.Constructor=c,a('input[type="money"], [data-role="keyboard"]').keyboard()}($),function(a){"use strict";a.password=function(b,c,d){"function"==typeof c&&(d=c,c="");var e='<div class="popup slideUpAnime password-pop removeOnClose"><div class="pwd-cont"><div class="pwd-head"><big class="pwd-title">'+(c||"请输入密码")+'</big><big class="close-popup uicon-cancel cell-link"></big></div>'+(b?'<div class="pwd-main border-t">'+b+"</div>":"")+'<div class="pwd-foot border-t"><form class="password border"><input type="password" maxlength="1" class="pwd" readonly><input type="password" maxlength="1" class="pwd" readonly><input type="password" maxlength="1" class="pwd" readonly><input type="password" maxlength="1" class="pwd" readonly><input type="password" maxlength="1" class="pwd" readonly><input type="password" maxlength="1" class="pwd" readonly></form></div></div></div>',f=a(e).appendTo(document.body),g=f.find("form"),h=g.find("input"),i=0,j=function(){var b=[];return h.each(function(c,d){b.push(a(d).val())}),b.join("")};a.popup(f.get(0)),g.keyboard({type:"password",renderVal:function(a){return a},setVal:function(b){6>i&&a(h[i++%6]).val(b),6===i&&(d&&d(j()),a.closePopup(),g.keyboard("close"),i=0,h.val(""))},deletVal:function(b){b?(i=0,h.val("")):i>0&&a(h[--i%6]).val("")}}).keyboard("open")}}($);